# Blockchain Infrastructure Log Rotation Configuration
# Created: 2025-07-09

# MEV Infrastructure Logs
/data/blockchain/nodes/mev-infra/logs/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 644 lyftium lyftium
    postrotate
        systemctl reload mev-engine mev-service || true
    endscript
}

# Blockchain Node Logs
/data/blockchain/storage/*/logs/*.log {
    daily
    rotate 14
    compress
    delaycompress
    missingok
    notifempty
    create 644 lyftium lyftium
    sharedscripts
    postrotate
        systemctl reload-or-restart ethereum erigon optimism base arbitrum polygon || true
    endscript
}

# System Journal Logs for Blockchain Services
/var/log/blockchain/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
}

# Docker Container Logs
/var/lib/docker/containers/*/*-json.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    copytruncate
    maxsize 100M
}
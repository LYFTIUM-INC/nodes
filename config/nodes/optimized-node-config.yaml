# Optimized Node Configuration for MEV Arbitrage
# Resource-constrained environment settings

ethereum:
  # Geth configuration (snap sync for faster initial sync)
  geth:
    syncmode: snap
    cache: 2048  # 2GB cache
    maxpeers: 50
    netrestrict: []  # No network restrictions
    rpc:
      apis: ["eth", "net", "web3", "txpool", "debug", "trace"]
      vhosts: ["*"]
      cors: ["*"]
    ws:
      apis: ["eth", "net", "web3", "txpool"]
      origins: ["*"]
    txpool:
      lifetime: 3h
      pricebump: 10
      accountslots: 16
      globalslots: 8192
      accountqueue: 64
      globalqueue: 2048
    miner:
      gaslimit: 30000000
      gasprice: "1000000000"  # 1 gwei
    
  # Erigon configuration (when using Erigon)
  erigon:
    prune:
      mode: "full"
      r.before: 11184524  # Prune receipts before block
    db:
      size.limit: "800GB"
    torrent:
      download.rate: "100mb"
      upload.rate: "50mb"
    snapshots: true
    
solana:
  # Development cluster settings
  validator:
    ledger_size_limit: 100000000  # 100MB
    log_level: "info"
    rpc:
      enable_rpc_transaction_history: true
      enable_extended_tx_metadata_storage: true
      full_api: true
    tpu:
      enable_quic: true
    accounts:
      shrink_ratio: 0.8
      
layer2:
  # Arbitrum settings
  arbitrum:
    chain_id: 42161
    data_availability:
      enable: true
      rest_aggregator:
        enable: true
        urls: ["https://arb1.arbitrum.io/das-servers"]
    sequencer:
      enable: false  # We're not a sequencer
    cache: 1024  # 1GB cache
    
  # Optimism settings
  optimism:
    network: "mainnet"
    sync_mode: "full"
    l1_rpc_kind: "standard"
    p2p:
      enable: true
      bootnodes: []
      
  # Base settings
  base:
    network: "mainnet"
    sync_mode: "full"
    l1_rpc_kind: "standard"
    
mev:
  # MEV-Boost configuration
  boost:
    relays:
      - url: "https://boost-relay.flashbots.net"
        priority: 100
      - url: "https://relay.ultrasound.money"
        priority: 90
      - url: "https://mainnet-relay.securerpc.com"
        priority: 80
    timeouts:
      get_header: 950  # ms
      get_payload: 4000  # ms
      register_validator: 3000  # ms
    
  # Flashbots bundle settings
  flashbots:
    bundle_timeout: 5000  # ms
    max_bundle_size: 5  # transactions
    simulation_timeout: 2000  # ms
    
monitoring:
  # Prometheus metrics
  prometheus:
    port: 9090
    retention: "7d"
    retention_size: "2GB"
    
  # Grafana dashboards
  grafana:
    port: 3000
    refresh_interval: "5s"
    
  # Alert thresholds
  alerts:
    cpu_warning: 75  # %
    cpu_critical: 90  # %
    memory_warning: 80  # %
    memory_critical: 95  # %
    disk_warning: 80  # %
    disk_critical: 90  # %
    
resource_limits:
  # Per-node resource allocation
  ethereum:
    memory: "12G"
    cpu: "3.0"
    disk_io_weight: 500
    
  solana:
    memory: "4G"
    cpu: "1.0"
    disk_io_weight: 200
    
  layer2_nodes:
    memory: "6G"
    cpu: "1.5"
    disk_io_weight: 300
    
  mev_boost:
    memory: "1G"
    cpu: "0.5"
    disk_io_weight: 100
    
  monitoring:
    memory: "2G"
    cpu: "0.5"
    disk_io_weight: 100
    
failover:
  # Circuit breaker settings
  circuit_breaker:
    failure_threshold: 5
    recovery_timeout: 30  # seconds
    half_open_requests: 3
    
  # Health check intervals
  health_check:
    interval: 10  # seconds
    timeout: 5  # seconds
    unhealthy_threshold: 3
    
  # Backup endpoints
  backup_rpcs:
    ethereum:
      - "https://eth-mainnet.public.blastapi.io"
      - "https://rpc.ankr.com/eth"
    arbitrum:
      - "https://arb1.arbitrum.io/rpc"
    optimism:
      - "https://mainnet.optimism.io"
    base:
      - "https://mainnet.base.org"
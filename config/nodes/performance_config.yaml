# Enterprise-Grade Performance Configuration for MEV Operations
# Optimized for maximum MEV profitability

optimization:
  auto_tune: true
  tune_interval: 300  # 5 minutes
  performance_targets:
    rpc_latency: 10  # ms target
    block_processing: 50  # ms target
    mempool_updates: 100  # per second
    cache_hit_rate: 90  # percentage
    websocket_latency: 5  # ms target

system:
  kernel:
    # Memory management
    vm.swappiness: 10
    vm.dirty_ratio: 5
    vm.dirty_background_ratio: 2
    vm.vfs_cache_pressure: 50
    vm.min_free_kbytes: 262144
    
    # Network optimization
    net.core.rmem_max: 134217728
    net.core.wmem_max: 134217728
    net.core.rmem_default: 16777216
    net.core.wmem_default: 16777216
    net.ipv4.tcp_rmem: '4096 87380 134217728'
    net.ipv4.tcp_wmem: '4096 65536 134217728'
    net.core.netdev_max_backlog: 5000
    net.core.netdev_budget: 600
    net.ipv4.tcp_congestion_control: 'bbr'
    net.ipv4.tcp_notsent_lowat: 16384
    net.ipv4.tcp_low_latency: 1
    net.ipv4.tcp_fastopen: 3
    net.ipv4.tcp_mtu_probing: 1
    net.ipv4.tcp_timestamps: 1
    net.ipv4.tcp_sack: 1
    net.ipv4.tcp_window_scaling: 1
    
    # File system
    fs.file-max: 2097152
    fs.nr_open: 1048576
    fs.inotify.max_user_watches: 524288
    
  limits:
    nofile: 1048576
    nproc: 32768
    memlock: unlimited
    
  hugepages:
    enabled: true
    size: 2048  # 2MB pages
    count: 1024  # 2GB total

nodes:
  ethereum:
    priority: critical
    cpu_cores: [0, 1, 2, 3]
    numa_node: 0
    memory_limit: 16384  # MB
    cache_size: 4096  # MB
    io_priority: 7
    network_queues: 4
    optimizations:
      state_cache: 8192  # MB
      trie_cache: 25  # percentage
      snapshot_cache: 4096  # MB
      tx_lookup_limit: 0  # unlimited
      
  arbitrum:
    priority: high
    cpu_cores: [4, 5]
    numa_node: 0
    memory_limit: 8192
    cache_size: 2048
    io_priority: 6
    network_queues: 2
    optimizations:
      inbox_reader_delay: 100  # ms
      batch_poster_interval: 1000  # ms
      
  optimism:
    priority: high
    cpu_cores: [6, 7]
    numa_node: 0
    memory_limit: 8192
    cache_size: 2048
    io_priority: 6
    network_queues: 2
    optimizations:
      sequencer_enabled: false
      verifier_enabled: true
      
  base:
    priority: medium
    cpu_cores: [8, 9]
    numa_node: 0
    memory_limit: 4096
    cache_size: 1024
    io_priority: 5
    network_queues: 1
    
  polygon:
    priority: medium
    cpu_cores: [10, 11]
    numa_node: 0
    memory_limit: 6144
    cache_size: 1536
    io_priority: 5
    network_queues: 2
    optimizations:
      bor_cache: 2048
      heimdall_cache: 1024
      
  mev_boost:
    priority: critical
    cpu_cores: [12]
    numa_node: 0
    memory_limit: 2048
    cache_size: 512
    io_priority: 7
    network_queues: 1

mev_specific:
  mempool_monitoring:
    update_interval: 10  # ms
    batch_size: 100
    priority_gas_threshold: 100  # gwei
    
  transaction_builder:
    max_bundle_size: 5
    simulation_timeout: 1000  # ms
    revert_protection: true
    
  flashbots:
    bundle_timeout: 4000  # ms
    max_retries: 3
    reputation_management: true
    
  arbitrage:
    min_profit_threshold: 50  # USD
    max_gas_price: 500  # gwei
    slippage_tolerance: 0.5  # percentage
    
  sandwich:
    victim_min_value: 1000  # USD
    frontrun_gas_delta: 10  # gwei
    backrun_gas_delta: 1  # gwei

monitoring:
  prometheus:
    enabled: true
    port: 9090
    retention: 7d
    retention_size: 10GB
    
  alerting:
    enabled: true
    thresholds:
      rpc_latency_warning: 50  # ms
      rpc_latency_critical: 100  # ms
      cpu_warning: 75  # percentage
      cpu_critical: 90  # percentage
      memory_warning: 80  # percentage
      memory_critical: 95  # percentage
      disk_warning: 80  # percentage
      disk_critical: 90  # percentage
      
  dashboards:
    refresh_interval: 1000  # ms
    history_retention: 24  # hours
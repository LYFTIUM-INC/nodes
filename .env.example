# ==============================================================================
# LYFTIUM MEV LAB - ENVIRONMENT CONFIGURATION TEMPLATE
# ==============================================================================
# Instructions:
# 1. Copy this file to .env.<environment> (e.g., .env.production)
# 2. Fill in all values with your actual credentials
# 3. NEVER commit .env files with real values to git
# 4. Keep .env.example updated with new variables
# ==============================================================================

# ------------------------------------------------------------------------------
# ENVIRONMENT IDENTIFICATION
# ------------------------------------------------------------------------------
ENVIRONMENT=production
DEPLOYMENT_DATE=2026-01-31
VERSION=3.3.2

# ------------------------------------------------------------------------------
# EXECUTION LAYER CLIENTS
# ------------------------------------------------------------------------------

# Reth Configuration
RETH_HTTP_PORT=8557
RETH_WS_PORT=8558
RETH_ENGINE_PORT=8553
RETH_DATA_DIR=/data/blockchain/storage/reth
RETH_CACHE_SIZE=8G
RETH_MAX_PEERS=150

# Erigon Configuration
ERIGON_HTTP_PORT=8550
ERIGON_WS_PORT=8551
ERIGON_ENGINE_PORT=8552
ERIGON_DATA_DIR=/data/blockchain/storage/erigon
ERIGON_MAX_PEERS=100

# ------------------------------------------------------------------------------
# CONSENSUS LAYER
# ------------------------------------------------------------------------------

# Lighthouse Configuration
LIGHTHOUSE_HTTP_PORT=5052
LIGHTHOUSE_METRICS_PORT=5054
LIGHTHOUSE_DATA_DIR=/data/blockchain/storage/lighthouse
LIGHTHOUSE_SLASHING_PROTECTION_DB=/data/blockchain/storage/lighthouse/slashing-protection.sqlite

# ------------------------------------------------------------------------------
# JWT SECRETS FOR ENGINE API
# ------------------------------------------------------------------------------
# Generate with: openssl rand -hex 32 > /path/to/jwt-secret.hex
JWT_SECRET_PATH=/data/blockchain/storage/jwt-common/jwt-secret.hex

# ------------------------------------------------------------------------------
# MEV INFRASTRUCTURE
# ------------------------------------------------------------------------------

# MEV-Boost Configuration
MEV_BOOST_PORT=18550
MEV_BOOST_RELAYS=https://0xac6e77dfe25ecd6110b8e780608a0a0dd91e60b9@boost-relay.flashbots.net,https://0xa1559ace749633b997cb3fdacffbff904ee6addc@builder-relay-mainnet.blocknative.com

# RBuilder Configuration
RBUILDER_PORT=18552
RBUILDER_API_KEY=your_api_key_here
RBUILDER_RECIPIENT_ADDRESS=0xYourETHAddressHere

# ------------------------------------------------------------------------------
# EXTERNAL RPC ENDPOINTS
# ------------------------------------------------------------------------------
# Primary RPC (fallback)
PRIMARY_RPC_URL=https://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY
PRIMARY_RPC_WS_URL=wss://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY

# Backup RPCs
BACKUP_RPC_URL_1=https://mainnet.infura.io/v3/YOUR_PROJECT_ID
BACKUP_RPC_URL_2=https://eth.llamarpc.com

# ------------------------------------------------------------------------------
# MONITORING & OBSERVABILITY
# ------------------------------------------------------------------------------

# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=90d
PROMETHEUS_STORAGE_SIZE=50GB

# Grafana
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=change_this_immediately

# Alertmanager
ALERTMANAGER_PORT=9093
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
PAGERDUTY_API_KEY=your_pagerduty_integration_key

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------

# ClickHouse
CLICKHOUSE_PORT=8123
CLICKHOUSE_HTTP_PORT=8124
CLICKHOUSE_NATIVE_PORT=9000
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DATABASE=blockchain_data

# ------------------------------------------------------------------------------
# SECURITY & ACCESS CONTROL
# ------------------------------------------------------------------------------

# JWT Token Expiration (days)
JWT_EXPIRATION_DAYS=30

# API Rate Limits
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW=3600

# IP Whitelist (comma-separated)
IP_WHITELIST=127.0.0.1,10.0.0.0/8

# ------------------------------------------------------------------------------
# LOGGING CONFIGURATION
# ------------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json
LOG_RETENTION_DAYS=30
LOG_MAX_SIZE=10G
LOG_COMPRESSION=true

# ------------------------------------------------------------------------------
# NETWORK CONFIGURATION
# ------------------------------------------------------------------------------
NAT_EXT_IP=51.159.82.58
MAX_PEERS=200
PEER_EVENT_MESSAGE_QUEUE_SIZE=100

# ------------------------------------------------------------------------------
# PERFORMANCE TUNING
# ------------------------------------------------------------------------------
# Memory limits (in GB)
RETH_MEMORY_LIMIT=48
ERIGON_MEMORY_LIMIT=48
LIGHTHOUSE_MEMORY_LIMIT=8

# Database size limits (in TB)
DB_SIZE_LIMIT=2

# Sync configuration
SYNC_SNAP_TYPE=full
SYNC_BATCH_SIZE=128m
SYNC_CACHE_LIMIT=1g

# ------------------------------------------------------------------------------
# BACKUP CONFIGURATION
# ------------------------------------------------------------------------------
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=90
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_S3_BUCKET=s3://lyftium-backups/blockchain
BACKUP_ENCRYPTION=true

# ------------------------------------------------------------------------------
# FEATURE FLAGS
# ------------------------------------------------------------------------------
ENABLE_MEV_BOOST=true
ENABLE_RBUILDER=true
ENABLE_PRIVATE_MEMPOOL=true
ENABLE_TRANSACTION_SIMULATION=true
ENABLE_CROSS_CHAIN=true

# ------------------------------------------------------------------------------
# DEVELOPMENT/DEBUGGING (set to false in production)
# ------------------------------------------------------------------------------
DEBUG_MODE=false
TRACE_ENABLED=false
PROFILING_ENABLED=false
METRICS_DEBUG=false

# ------------------------------------------------------------------------------
# COMPLIANCE & REGULATORY
# ------------------------------------------------------------------------------
COMPLIANCE_MODE=true
AUDIT_LOGGING=true
DATA_RETENTION_YEARS=7
GDPR_COMPLIANCE=true

# ------------------------------------------------------------------------------
# GIT & VERSION CONTROL
# ------------------------------------------------------------------------------
GIT_REPO=https://github.com/LYFTIUM-INC/nodes.git
GIT_BRANCH=main
GIT_COMMIT_HASH=auto-generated

# ------------------------------------------------------------------------------
# CONTACT & NOTIFICATIONS
# ------------------------------------------------------------------------------
ADMIN_EMAIL=ops@lyftium.io
ONCALL_PHONE=+1234567890
SLACK_CHANNEL=#operations-alerts
